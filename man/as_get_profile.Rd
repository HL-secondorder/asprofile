% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/asprofile.R
\name{as_get_profile}
\alias{as_get_profile}
\title{Fit and visualize an acceleration–speed (A–S) profile}
\usage{
as_get_profile(
  prep,
  method = c("ci", "box"),
  ci_level = 0.95,
  ci_interval = c("confidence", "prediction"),
  seed = NULL,
  keep_frac = 0.5,
  print_plot = TRUE
)
}
\arguments{
\item{prep}{Output from \code{as_prepare_data()}.}

\item{method}{Character. Cleaning method:
\code{"ci"} (confidence interval) or \code{"box"} (quantile + IQR).}

\item{ci_level}{Numeric. Confidence level for CI filtering.
Default is 0.95.}

\item{ci_interval}{Character. Passed to \code{stats::predict()}:
\code{"confidence"} or \code{"prediction"}.}

\item{seed}{Optional integer for reproducible sampling.}

\item{keep_frac}{Numeric in (0,1]. Fraction of raw points plotted.
Default is 0.5.}

\item{print_plot}{Logical. If TRUE, returns the A–S profile plot.}
}
\value{
A list with:
\itemize{
\item \code{as_clean}: cleaned envelope points
\item \code{lm_initial}: initial linear model
\item \code{lm_clean}: final linear model
\item \code{metrics}: list with A0, S0, slope, R^2
\item \code{plot_profile}: ggplot object (or NULL)
}
}
\description{
This function cleans envelope points using either a confidence-interval
or box/IQR method, fits a linear A–S model, and computes key mechanical
metrics (A0, S0, slope, R^2).
}
\examples{
df <- tibble::tibble(
  speed = runif(500, 0, 8),
  acc   = rnorm(500, 2, 0.6)
)

prep <- as_prepare_data(df, speed_threshold = 3, print_plot = FALSE)
prof <- as_get_profile(prep, method = "ci", print_plot = TRUE)

prof$metrics

}
