% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/asprofile.R
\name{as_prepare_data}
\alias{as_prepare_data}
\title{Prepare acceleration–speed data for A–S profiling}
\usage{
as_prepare_data(
  x,
  speed_threshold = 0,
  bin_width = 0.1,
  envelope_n = 2,
  keep_frac = 0.5,
  seed = NULL,
  print_plot = TRUE
)
}
\arguments{
\item{x}{A data frame or tibble containing at least columns
\code{speed} (m/s) and \code{acc} (m/s^2).
Optional columns \code{activity_id} and \code{athlete_id} are preserved
if present.}

\item{speed_threshold}{Numeric. Minimum speed (m/s) to include.
Default is 0.}

\item{bin_width}{Numeric. Width of speed bins (m/s).
Default is 0.1.}

\item{envelope_n}{Integer. Number of highest-acceleration points
retained per speed bin. Default is 2.}

\item{keep_frac}{Numeric in (0,1]. Fraction of raw points shown
in plots. Default is 0.5.}

\item{seed}{Optional integer. If provided, sampling is reproducible.}

\item{print_plot}{Logical. If TRUE, returns a raw A–S scatter plot
with envelope points highlighted.}
}
\value{
An object of class \code{"as_prep"} containing:
\itemize{
\item \code{as_data}: filtered raw data
\item \code{prepared_data}: binned data
\item \code{as_initial_lm_data}: envelope points
\item \code{plot_initial}: ggplot object (or NULL)
}
}
\description{
This function filters raw acceleration–speed observations, bins speed,
and extracts envelope points (top acceleration per speed bin) for
subsequent A–S model fitting.
}
\examples{
df <- tibble::tibble(
  speed = runif(500, 0, 8),
  acc   = rnorm(500, 2, 0.6)
)

prep <- as_prepare_data(df, speed_threshold = 3, print_plot = TRUE)

}
